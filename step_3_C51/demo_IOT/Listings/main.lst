C51 COMPILER V9.54   MAIN                                                                  06/22/2022 18:22:41 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5_51\C51\BIN\C51.EXE main.c LARGE OPTIMIZE(8,SPEED) BROWSE INCDIR(.\uart;.\esp8266;.\DELAY
                    -;.\LCD;.\mqtt;.\timer0;.\OneWire;.\DS18B20) DEBUG OBJECTEXTEND PRINT(.\Listings\main.lst) TABS(3) OBJECT(.\Objects\main.
                    -obj)

line level    source

   1          #include <REGX52.H>
   2          #include <string.h>
   3          #include <stdio.h>
   4          #include "uart.h"
   5          #include "esp8266.h"
   6          #include "delay.h"
   7          #include "LCD1602.h"
   8          #include "mqtt.h"
   9          #include "timer_0.h"
*** WARNING C318 IN LINE 9 OF main.c: can't open file 'timer_0.h'
  10          #include <INTRINS.H>
  11          #include "DS18B20.h"
  12          
  13          
  14          int index = 0;
  15          int clear = 0;
  16          
  17          char str[32] = "";
  18          
  19          /*
  20          10                        //固定头           
  21          20                      //代表数据长度
  22          00 06                      // 数据协议字节长度
  23          4D 51 49 73 64 70          // MQIsdp
  24          03                         // 版本号 5 
  25          C2                         //连接标志
  26          01 2C                                  //活动时间300s
  27          00 04                      //客户端长度 5
  28          74 65 73 74          // 客户端ID用户名对应16进制
  29          00 05                      // 服务器用户名长度5
  30          77 6F 67 75 61       //用户名对应16进制
  31          00 05                      // 服务器密码长度5
  32          77 6F 67 75 61             //服务器密码对应16进制
  33          
  34          10 20 00 06 4D 51 49 73 64 70 03 C2 01 2C 00 04 74 65 73 74 00 05 77 6F 67 75 61 00 05 77 6F 67 75 61
  35          10 20 00 06 4D 51 49 73 64 70 03 C2 01 2C 00 04 74 65 73 74 00 05 77 6F 67 75 61 00 05 77 6F 67 75 61
  36          82 15 00 01 00 10 4E 4A 55 53 54 5A 4A 2F 4C 49 53 2F 72 78 30 31 00 // 订阅
  37          
  38          C0 00 // 发送心跳
  39          
  40          30 1D 00 10 4E 4A 55 53 54 5A 4A 2F 4C 49 53 2F 74 78 30 31 68 65 6C 6C 6F 20 77 6F 6C 64 21 // 发布
  41          */
  42          
  43          
  44          void main()
  45          {
  46   1         DS18B20_ConvertT();
  47   1         Timer0_Init();
*** WARNING C206 IN LINE 47 OF main.c: 'Timer0_Init': missing function-prototype
  48   1         Uart_Init();
  49   1         LCD_Init();
  50   1         Esp8266_Init_Tcp_Client();
  51   1         while(1)
C51 COMPILER V9.54   MAIN                                                                  06/22/2022 18:22:41 PAGE 2   

  52   1         {
  53   2            if(CONNECTED_READY)
  54   2            {
  55   3               P2_0 = 0;
  56   3               DS18B20_ConvertT();
  57   3            }
  58   2         }
  59   1      
  60   1      }
  61          
  62          
  63          void usart() interrupt 4
  64          {
  65   1      
  66   1         if(RI == 1)// 接收中断
  67   1         {
  68   2            if(SBUF == '\r'){  // 接收结束标志位
  69   3               clear = 1;
  70   3            }else{
  71   3               str[index] = SBUF;
  72   3               index++;
  73   3            }
  74   2            
  75   2            if(clear == 1){ // 数据接收完成
  76   3               if(strstr(str, "CONNECTEDWIFI") != NULL){ // wifi链接成功，TCP客户端链接服务端
  77   4                  P2_0 = 0;
  78   4                  P2_1 = 0;
  79   4                  //Esp8266_CIPMUX(); // 设置多连接
  80   4                  //Esp8266_TCP_CLIENT_CONNECT(); // TCP连接
  81   4               }
  82   3               str[32] = "";
*** WARNING C260 IN LINE 82 OF main.c: '=': pointer truncation
  83   3               index = 0;
  84   3               clear = 0;
  85   3            
  86   3            }
  87   2            RI = 0;
  88   2         
  89   2         }
  90   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    200    ----
   CONSTANT SIZE    =     15    ----
   XDATA SIZE       =     36    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  3 WARNING(S),  0 ERROR(S)
